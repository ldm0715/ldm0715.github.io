<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>音频处理——G711A-law编码 | gcnanmuの博客</title><meta name="author" content="gcnanmu"><meta name="copyright" content="gcnanmu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="前言本学期有一门音视频处理的课程，虽然老师上课上得确实过于粗糙了，但是确实激起了我的兴趣，课后在不断解决自己的疑惑的过程中还学到了很多有用但冷门的知识。日后应该也会写一篇笔记来记录学习的过程。 本次实践主题为G711 A律编码，是一种在通信领域应用广泛的编解码标准之一，是非均匀PCM编码的一种，具有良好的压缩效果和兼容性，因此广泛运用在通信领域，且主要在欧洲和亚洲地区广泛运用，我国也广泛采用此编码">
<meta property="og:type" content="article">
<meta property="og:title" content="音频处理——G711A-law编码">
<meta property="og:url" content="https://ldm0715.github.io/post/yin-pin-chu-li-g711a-lu-bian-ma/index.html">
<meta property="og:site_name" content="gcnanmuの博客">
<meta property="og:description" content="前言本学期有一门音视频处理的课程，虽然老师上课上得确实过于粗糙了，但是确实激起了我的兴趣，课后在不断解决自己的疑惑的过程中还学到了很多有用但冷门的知识。日后应该也会写一篇笔记来记录学习的过程。 本次实践主题为G711 A律编码，是一种在通信领域应用广泛的编解码标准之一，是非均匀PCM编码的一种，具有良好的压缩效果和兼容性，因此广泛运用在通信领域，且主要在欧洲和亚洲地区广泛运用，我国也广泛采用此编码">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.z4a.net/images/2024/05/06/G711A.png">
<meta property="article:published_time" content="2023-05-08T10:00:00.000Z">
<meta property="article:modified_time" content="2024-05-07T03:06:58.493Z">
<meta property="article:author" content="gcnanmu">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="音视频信号处理">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.z4a.net/images/2024/05/06/G711A.png"><link rel="shortcut icon" href="https://pic.imgdb.cn/item/63e4ec274757feff339981c5.webp"><link rel="canonical" href="https://ldm0715.github.io/post/yin-pin-chu-li-g711a-lu-bian-ma/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":90,"position":"top","messagePrev":"本文章距编写至今已达","messageNext":"天 如有变动，请以实际情况为准."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":250},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: gcnanmu","link":"链接: ","source":"来源: gcnanmuの博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '音频处理——G711A-law编码',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-05-07 11:06:58'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/set_font.css"><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><link rel="stylesheet" href="https://at.alicdn.com/t/c/font_3962437_6snoplzeg9u.css"><span id="fps"></span><link rel="stylesheet" href="/css/fps.css"><link rel="stylesheet" href="/css/pic_border.css"><link rel="stylesheet" href="/css/right.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/yemian.css"><link rel="stylesheet" href="/css/bilibili.css"><link rel="stylesheet" href="/css/kuanping.css"><link rel="stylesheet" href="/css/weather.css"><link rel="stylesheet" href="/css/footer.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css"  media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/css/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/css/runtime.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="gcnanmuの博客" type="application/atom+xml">
</head><body><script>window.paceOptions = {
  restartOnPushState: false
}

document.addEventListener('pjax:send', () => {
  Pace.restart()
})
</script><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/xlenco/JS-X@main/pace.js/pace.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://pic.imgdb.cn/item/63e4ec274757feff339981c5.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-shouye"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw iconfont icon-yuedu"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw iconfont icon-wenzhangliebiao"></i><span> 归档</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw iconfont icon-guidang"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw iconfont icon-biaoqian"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/journals/"><i class="fa-fw iconfont icon-icon-shishi"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-lianjie"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw iconfont icon-caozuojiemiantubiao---_jingxiang"></i><span> 镜像</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://gcnanmu.gitee.io/"><i class="fa-fw iconfont icon-gitee"></i><span> Gitee</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://hexo.gcnanmu3125.xyz/"><i class="fa-fw iconfont icon-github"></i><span> GitHub</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://vercel.gcnanmu3125.xyz/"><i class="fa-fw iconfont icon-auth"></i><span> Vercel</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-iconzhengli-"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://pic.imgdb.cn/item/66399a080ea9cb1403d711a0.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="gcnanmuの博客"><span class="site-name">gcnanmuの博客</span></a></span><div id="tp-weather-widget"></div><div id="none_space"></div><div id="randomPost"><a class="site-page social-icon search" href="javascript:;" onclick="randomPost()" title="随机访问一篇文章"><i class="fas fa-circle-notch fa-fw"></i></a></div><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索"><i class="fas fa-search fa-fw"></i><span>    </span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-shouye"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw iconfont icon-yuedu"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw iconfont icon-wenzhangliebiao"></i><span> 归档</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw iconfont icon-guidang"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw iconfont icon-biaoqian"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/journals/"><i class="fa-fw iconfont icon-icon-shishi"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-lianjie"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw iconfont icon-caozuojiemiantubiao---_jingxiang"></i><span> 镜像</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://gcnanmu.gitee.io/"><i class="fa-fw iconfont icon-gitee"></i><span> Gitee</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://hexo.gcnanmu3125.xyz/"><i class="fa-fw iconfont icon-github"></i><span> GitHub</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://vercel.gcnanmu3125.xyz/"><i class="fa-fw iconfont icon-auth"></i><span> Vercel</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-iconzhengli-"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">音频处理——G711A-law编码</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-08T10:00:00.000Z" title="发表于 2023-05-08 18:00:00">2023-05-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-07T03:06:58.493Z" title="更新于 2024-05-07 11:06:58">2024-05-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86/">音视频信号处理</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>21分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="音频处理——G711A-law编码"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本学期有一门音视频处理的课程，虽然老师上课上得确实过于粗糙了，但是确实激起了我的兴趣，课后在不断解决自己的疑惑的过程中还学到了很多有用但冷门的知识。日后应该也会写一篇笔记来记录学习的过程。</p>
<p>本次实践主题为G711 A律编码，是一种在通信领域应用广泛的编解码标准之一，是非均匀PCM编码的一种，具有良好的压缩效果和兼容性，因此广泛运用在通信领域，且主要在欧洲和亚洲地区广泛运用，我国也广泛采用此编码标准。</p>
<h2 id="G711A律编码原理"><a href="#G711A律编码原理" class="headerlink" title="G711A律编码原理"></a>G711A律编码原理</h2><h3 id="非均匀PCM"><a href="#非均匀PCM" class="headerlink" title="非均匀PCM"></a>非均匀PCM</h3><p>对于输入的音频信号，每个时刻的信号幅值是完全不同的，最为直观的感受就是在音频播放器中，播放音乐时打开示波器，可以看到音频信号幅值随着播放起起伏伏。变化速度快，且幅值变化没有规律，此时采用均匀PCM编码处理，将输入信号的幅度范围进行等间隔划分的量化，会导致高频部分失真，也无法捕捉到音频信号频繁的动态变化。</p>
<p><img src="https://www.z4a.net/images/2023/05/08/f2fd610d881cb72475ef1e17d6f7587f.gif" alt="音频波形"></p>
<p>这时候就可以考虑非均匀变换，根据不同的幅值情况采用非均匀的间隔量化，可以在达到压缩目的的同时获得更高的精度，尽可能不让关键信息丢失。G711A律编码就是非均匀PCM编码的一种。</p>
<p>对于G711 A律编码，也分为连续信号与离散信号的两种情况。</p>
<h3 id="连续信号"><a href="#连续信号" class="headerlink" title="连续信号"></a>连续信号</h3><p>对于连续的信号，A律编码采用了两段近似的方法，其表达式为：</p>
<div align="center"><svg xmlns="http://www.w3.org/2000/svg" width="46.972ex" height="7.738ex" viewBox="0 -1960.1 20761.6 3420.2" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style=""><defs><path id="MJX-408-TEX-I-1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path><path id="MJX-408-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-408-TEX-I-1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path><path id="MJX-408-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-408-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-408-TEX-S4-23A7" d="M712 899L718 893V876V865Q718 854 704 846Q627 793 577 710T510 525Q510 524 509 521Q505 493 504 349Q504 345 504 334Q504 277 504 240Q504 -2 503 -4Q502 -8 494 -9T444 -10Q392 -10 390 -9Q387 -8 386 -5Q384 5 384 230Q384 262 384 312T383 382Q383 481 392 535T434 656Q510 806 664 892L677 899H712Z"></path><path id="MJX-408-TEX-S4-23A9" d="M718 -893L712 -899H677L666 -893Q542 -825 468 -714T385 -476Q384 -466 384 -282Q384 3 385 5L389 9Q392 10 444 10Q486 10 494 9T503 4Q504 2 504 -239V-310V-366Q504 -470 508 -513T530 -609Q546 -657 569 -698T617 -767T661 -812T699 -843T717 -856T718 -876V-893Z"></path><path id="MJX-408-TEX-S4-23A8" d="M389 1159Q391 1160 455 1160Q496 1160 498 1159Q501 1158 502 1155Q504 1145 504 924Q504 691 503 682Q494 549 425 439T243 259L229 250L243 241Q349 175 421 66T503 -182Q504 -191 504 -424Q504 -600 504 -629T499 -659H498Q496 -660 444 -660T390 -659Q387 -658 386 -655Q384 -645 384 -425V-282Q384 -176 377 -116T342 10Q325 54 301 92T255 155T214 196T183 222T171 232Q170 233 170 250T171 268Q171 269 191 284T240 331T300 407T354 524T383 679Q384 691 384 925Q384 1152 385 1155L389 1159Z"></path><path id="MJX-408-TEX-S4-23AA" d="M384 150V266Q384 304 389 309Q391 310 455 310Q496 310 498 309Q502 308 503 298Q504 283 504 150Q504 32 504 12T499 -9H498Q496 -10 444 -10T390 -9Q386 -8 385 2Q384 17 384 150Z"></path><path id="MJX-408-TEX-I-1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path><path id="MJX-408-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-408-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-408-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-408-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-408-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-408-TEX-N-6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-408-TEX-N-2061" d=""></path><path id="MJX-408-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path><path id="MJX-408-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-408-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-408-TEX-N-2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path><path id="MJX-408-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-408-TEX-N-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><use xlink:href="#MJX-408-TEX-I-1D453"></use></g><g data-mml-node="mo" transform="translate(550, 0)"><use xlink:href="#MJX-408-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(939, 0)"><use xlink:href="#MJX-408-TEX-I-1D465"></use></g><g data-mml-node="mo" transform="translate(1511, 0)"><use xlink:href="#MJX-408-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(2177.8, 0)"><use xlink:href="#MJX-408-TEX-N-3D"></use></g><g data-mml-node="mrow" transform="translate(3233.6, 0)"><g data-mml-node="mo"><use xlink:href="#MJX-408-TEX-S4-23A7" transform="translate(0, 1061.1)"></use><use xlink:href="#MJX-408-TEX-S4-23A9" transform="translate(0, -561.1)"></use><use xlink:href="#MJX-408-TEX-S4-23A8" transform="translate(0, 0)"></use><svg width="889" height="91.1" y="1060" x="0" viewBox="0 16.1 889 91.1"><use xlink:href="#MJX-408-TEX-S4-23AA" transform="scale(1, 0.448)"></use></svg><svg width="889" height="91.1" y="-651.1" x="0" viewBox="0 16.1 889 91.1"><use xlink:href="#MJX-408-TEX-S4-23AA" transform="scale(1, 0.448)"></use></svg></g><g data-mml-node="mtable" transform="translate(889, 0)"><g data-mml-node="mtr" transform="translate(0, 913.7)"><g data-mml-node="mtd" transform="translate(1520, 0)"><g data-mml-node="mfrac"><g data-mml-node="mrow" transform="translate(644.5, 516.4) scale(0.707)"><g data-mml-node="msub"><g data-mml-node="mi"><use xlink:href="#MJX-408-TEX-I-1D434"></use></g><g data-mml-node="TeXAtom" transform="translate(750, -150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use xlink:href="#MJX-408-TEX-N-30"></use></g></g></g><g data-mml-node="mrow" transform="translate(1153.6, 0)"><g data-mml-node="mo"><use xlink:href="#MJX-408-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(278, 0)"><use xlink:href="#MJX-408-TEX-I-1D465"></use></g><g data-mml-node="mo" transform="translate(850, 0)"><use xlink:href="#MJX-408-TEX-N-7C"></use></g></g></g><g data-mml-node="mrow" transform="translate(220, -346.3) scale(0.707)"><g data-mml-node="mn"><use xlink:href="#MJX-408-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(500, 0)"><use xlink:href="#MJX-408-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(1278, 0)"><g data-mml-node="mi"><use xlink:href="#MJX-408-TEX-N-6C"></use><use xlink:href="#MJX-408-TEX-N-6E" transform="translate(278, 0)"></use></g><g data-mml-node="TeXAtom" transform="translate(834, -150) scale(0.707)" data-mjx-texclass="ORD"></g></g><g data-mml-node="mo" transform="translate(2162, 0)"><use xlink:href="#MJX-408-TEX-N-2061"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2328.7, 0)"><g data-mml-node="msub"><g data-mml-node="mi"><use xlink:href="#MJX-408-TEX-I-1D434"></use></g><g data-mml-node="TeXAtom" transform="translate(750, -150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use xlink:href="#MJX-408-TEX-N-30"></use></g></g></g></g></g><rect width="2662.3" height="60" x="120" y="220"></rect></g><g data-mml-node="mi" transform="translate(2902.3, 0)"><use xlink:href="#MJX-408-TEX-I-1D460"></use></g><g data-mml-node="mi" transform="translate(3371.3, 0)"><use xlink:href="#MJX-408-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(3848.3, 0)"><use xlink:href="#MJX-408-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(4448.3, 0)"><use xlink:href="#MJX-408-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(4837.3, 0)"><use xlink:href="#MJX-408-TEX-I-1D465"></use></g><g data-mml-node="mo" transform="translate(5409.3, 0)"><use xlink:href="#MJX-408-TEX-N-29"></use></g></g><g data-mml-node="mtd" transform="translate(10880, 0)"><g data-mml-node="mrow"><g data-mml-node="mo"><use xlink:href="#MJX-408-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(278, 0)"><use xlink:href="#MJX-408-TEX-I-1D465"></use></g><g data-mml-node="mo" transform="translate(850, 0)"><use xlink:href="#MJX-408-TEX-N-7C"></use></g></g><g data-mml-node="mo" transform="translate(1405.8, 0)"><use xlink:href="#MJX-408-TEX-N-2264"></use></g><g data-mml-node="mfrac" transform="translate(2461.6, 0)"><g data-mml-node="mi" transform="translate(362.7, 394) scale(0.707)"><use xlink:href="#MJX-408-TEX-I-1D434"></use></g><g data-mml-node="msub" transform="translate(220, -346.3) scale(0.707)"><g data-mml-node="mi"><use xlink:href="#MJX-408-TEX-I-1D434"></use></g><g data-mml-node="TeXAtom" transform="translate(750, -150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use xlink:href="#MJX-408-TEX-N-30"></use></g></g></g><rect width="1015.7" height="60" x="120" y="220"></rect></g></g><g data-mml-node="mtd" transform="translate(16639.1, 0)"></g></g><g data-mml-node="mtr" transform="translate(0, -996.8)"><g data-mml-node="mtd"><g data-mml-node="mfrac"><g data-mml-node="mrow" transform="translate(220, 516.8) scale(0.707)"><g data-mml-node="mi"><use xlink:href="#MJX-408-TEX-I-1D434"></use></g><g data-mml-node="mo" transform="translate(750, 0)"><use xlink:href="#MJX-408-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(1139, 0)"><use xlink:href="#MJX-408-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(1639, 0)"><use xlink:href="#MJX-408-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(2417, 0)"><g data-mml-node="mi"><use xlink:href="#MJX-408-TEX-N-6C"></use><use xlink:href="#MJX-408-TEX-N-6E" transform="translate(278, 0)"></use></g><g data-mml-node="TeXAtom" transform="translate(834, -150) scale(0.707)" data-mjx-texclass="ORD"></g></g><g data-mml-node="mo" transform="translate(3301, 0)"><use xlink:href="#MJX-408-TEX-N-2061"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(3467.7, 0)"><g data-mml-node="msub"><g data-mml-node="mi"><use xlink:href="#MJX-408-TEX-I-1D434"></use></g><g data-mml-node="TeXAtom" transform="translate(750, -150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use xlink:href="#MJX-408-TEX-N-30"></use></g></g></g><g data-mml-node="mrow" transform="translate(1153.6, 0)"><g data-mml-node="mo"><use xlink:href="#MJX-408-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(278, 0)"><use xlink:href="#MJX-408-TEX-I-1D465"></use></g><g data-mml-node="mo" transform="translate(850, 0)"><use xlink:href="#MJX-408-TEX-N-7C"></use></g></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2281.6, 0)"><g data-mml-node="mo"><use xlink:href="#MJX-408-TEX-N-2F"></use></g></g><g data-mml-node="mi" transform="translate(2781.6, 0)"><use xlink:href="#MJX-408-TEX-I-1D434"></use></g></g><g data-mml-node="mo" transform="translate(6999.2, 0)"><use xlink:href="#MJX-408-TEX-N-29"></use></g></g><g data-mml-node="mrow" transform="translate(1601, -346.3) scale(0.707)"><g data-mml-node="mn"><use xlink:href="#MJX-408-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(500, 0)"><use xlink:href="#MJX-408-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(1278, 0)"><g data-mml-node="mi"><use xlink:href="#MJX-408-TEX-N-6C"></use><use xlink:href="#MJX-408-TEX-N-6E" transform="translate(278, 0)"></use></g><g data-mml-node="TeXAtom" transform="translate(834, -150) scale(0.707)" data-mjx-texclass="ORD"></g></g><g data-mml-node="mo" transform="translate(2162, 0)"><use xlink:href="#MJX-408-TEX-N-2061"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2328.7, 0)"><g data-mml-node="msub"><g data-mml-node="mi"><use xlink:href="#MJX-408-TEX-I-1D434"></use></g><g data-mml-node="TeXAtom" transform="translate(750, -150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use xlink:href="#MJX-408-TEX-N-30"></use></g></g></g></g></g><rect width="5424.3" height="60" x="120" y="220"></rect></g><g data-mml-node="mi" transform="translate(5664.3, 0)"><use xlink:href="#MJX-408-TEX-I-1D460"></use></g><g data-mml-node="mi" transform="translate(6133.3, 0)"><use xlink:href="#MJX-408-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(6610.3, 0)"><use xlink:href="#MJX-408-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(7210.3, 0)"><use xlink:href="#MJX-408-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(7599.3, 0)"><use xlink:href="#MJX-408-TEX-I-1D465"></use></g><g data-mml-node="mo" transform="translate(8171.3, 0)"><use xlink:href="#MJX-408-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(8560.3, 0)"><use xlink:href="#MJX-408-TEX-N-2C"></use></g></g><g data-mml-node="mtd" transform="translate(9838.3, 0)"><g data-mml-node="mfrac"><g data-mml-node="mi" transform="translate(362.7, 394) scale(0.707)"><use xlink:href="#MJX-408-TEX-I-1D434"></use></g><g data-mml-node="msub" transform="translate(220, -346.3) scale(0.707)"><g data-mml-node="mi"><use xlink:href="#MJX-408-TEX-I-1D434"></use></g><g data-mml-node="TeXAtom" transform="translate(750, -150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use xlink:href="#MJX-408-TEX-N-30"></use></g></g></g><rect width="1015.7" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(1533.5, 0)"><use xlink:href="#MJX-408-TEX-N-2264"></use></g><g data-mml-node="mrow" transform="translate(2589.2, 0)"><g data-mml-node="mo"><use xlink:href="#MJX-408-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(278, 0)"><use xlink:href="#MJX-408-TEX-I-1D465"></use></g><g data-mml-node="mo" transform="translate(850, 0)"><use xlink:href="#MJX-408-TEX-N-7C"></use></g></g><g data-mml-node="mo" transform="translate(3995, 0)"><use xlink:href="#MJX-408-TEX-N-2264"></use></g><g data-mml-node="mi" transform="translate(5050.8, 0)"><use xlink:href="#MJX-408-TEX-I-1D434"></use></g></g></g></g><g data-mml-node="mo" transform="translate(17528.1, 0)"></g></g></g></g></svg></div>

<p>其中，A为峰值幅度。A<del>0</del>为控制压缩度的常数，常取A<del>0</del> &#x3D; 87.6。当 |x| ≤ (A&#x2F;A<del>0</del>)，我们将其视为幅值小的信号，当 A ≥ |x| ≥ (A&#x2F;A<del>0</del>)时，我们将其视为幅值大的信号。</p>
<p>根据表达式，可以得到如下的函数图像：</p>
<img src="https://www.z4a.net/images/2023/05/08/G711A.png" alt="连续G711A律编码" style="zoom: 50%;" />

<p>从上图我们可以看出：</p>
<ul>
<li><p>对于幅值大的信号，幅值越高，变化得越平缓，压缩精度较高；</p>
</li>
<li><p>对于幅值小的信号，幅值越高，变化得越陡峭，压缩精度较低；</p>
</li>
</ul>
<p>有了编码压缩的过程，那自然就有解码的过程，也就是对编码函数取逆函数，其表达式如下：</p>
<div align="center"><svg xmlns="http://www.w3.org/2000/svg" width="54.463ex" height="7.361ex" viewBox="0 -1876.7 24072.7 3253.4" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style=""><defs><path id="MJX-828-TEX-I-1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path><path id="MJX-828-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-828-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-828-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-828-TEX-S4-7B" d="M661 -1243L655 -1249H622L604 -1240Q503 -1190 434 -1107T348 -909Q346 -897 346 -499L345 -98L343 -82Q335 3 287 87T157 223Q146 232 145 236Q144 240 144 250Q144 265 145 268T157 278Q242 333 288 417T343 583L345 600L346 1001Q346 1398 348 1410Q379 1622 600 1739L622 1750H655L661 1744V1727V1721Q661 1712 661 1710T657 1705T648 1700T630 1690T602 1668Q589 1659 574 1643T531 1593T484 1508T459 1398Q458 1389 458 1001Q458 614 457 605Q441 435 301 316Q254 277 202 251L250 222Q260 216 301 185Q443 66 457 -104Q458 -113 458 -501Q458 -888 459 -897Q463 -944 478 -988T509 -1060T548 -1114T580 -1149T602 -1167Q620 -1183 634 -1192T653 -1202T659 -1207T661 -1220V-1226V-1243Z"></path><path id="MJX-828-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-828-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-828-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-828-TEX-N-6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-828-TEX-N-2061" d=""></path><path id="MJX-828-TEX-I-1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path><path id="MJX-828-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-828-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-828-TEX-I-1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-828-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-828-TEX-N-2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path><path id="MJX-828-TEX-N-65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z"></path><path id="MJX-828-TEX-N-78" d="M201 0Q189 3 102 3Q26 3 17 0H11V46H25Q48 47 67 52T96 61T121 78T139 96T160 122T180 150L226 210L168 288Q159 301 149 315T133 336T122 351T113 363T107 370T100 376T94 379T88 381T80 383Q74 383 44 385H16V431H23Q59 429 126 429Q219 429 229 431H237V385Q201 381 201 369Q201 367 211 353T239 315T268 274L272 270L297 304Q329 345 329 358Q329 364 327 369T322 376T317 380T310 384L307 385H302V431H309Q324 428 408 428Q487 428 493 431H499V385H492Q443 385 411 368Q394 360 377 341T312 257L296 236L358 151Q424 61 429 57T446 50Q464 46 499 46H516V0H510H502Q494 1 482 1T457 2T432 2T414 3Q403 3 377 3T327 1L304 0H295V46H298Q309 46 320 51T331 63Q331 65 291 120L250 175Q249 174 219 133T185 88Q181 83 181 74Q181 63 188 55T206 46Q208 46 208 23V0H201Z"></path><path id="MJX-828-TEX-N-70" d="M36 -148H50Q89 -148 97 -134V-126Q97 -119 97 -107T97 -77T98 -38T98 6T98 55T98 106Q98 140 98 177T98 243T98 296T97 335T97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 61 434T98 436Q115 437 135 438T165 441T176 442H179V416L180 390L188 397Q247 441 326 441Q407 441 464 377T522 216Q522 115 457 52T310 -11Q242 -11 190 33L182 40V-45V-101Q182 -128 184 -134T195 -145Q216 -148 244 -148H260V-194H252L228 -193Q205 -192 178 -192T140 -191Q37 -191 28 -194H20V-148H36ZM424 218Q424 292 390 347T305 402Q234 402 182 337V98Q222 26 294 26Q345 26 384 80T424 218Z"></path><path id="MJX-828-TEX-N-5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path><path id="MJX-828-TEX-N-5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path><path id="MJX-828-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path><path id="MJX-828-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-828-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><use xlink:href="#MJX-828-TEX-I-1D453"></use></g><g data-mml-node="TeXAtom" transform="translate(603, 413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><use xlink:href="#MJX-828-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(778, 0)"><use xlink:href="#MJX-828-TEX-N-31"></use></g></g></g><g data-mml-node="mo" transform="translate(1834.5, 0)"><use xlink:href="#MJX-828-TEX-N-3D"></use></g><g data-mml-node="mrow" transform="translate(2890.2, 0)"><g data-mml-node="mo"><use xlink:href="#MJX-828-TEX-S4-7B"></use></g><g data-mml-node="mtable" transform="translate(806, 0)"><g data-mml-node="mtr" transform="translate(0, 913.4)"><g data-mml-node="mtd" transform="translate(4198.4, 0)"><g data-mml-node="mo"><use xlink:href="#MJX-828-TEX-N-28"></use></g><g data-mml-node="mfrac" transform="translate(389, 0)"><g data-mml-node="mrow" transform="translate(220, 457.1) scale(0.707)"><g data-mml-node="mn"><use xlink:href="#MJX-828-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(500, 0)"><use xlink:href="#MJX-828-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(1278, 0)"><g data-mml-node="mi"><use xlink:href="#MJX-828-TEX-N-6C"></use><use xlink:href="#MJX-828-TEX-N-6E" transform="translate(278, 0)"></use></g><g data-mml-node="TeXAtom" transform="translate(834, -150) scale(0.707)" data-mjx-texclass="ORD"></g></g><g data-mml-node="mo" transform="translate(2162, 0)"><use xlink:href="#MJX-828-TEX-N-2061"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2328.7, 0)"><g data-mml-node="msub"><g data-mml-node="mi"><use xlink:href="#MJX-828-TEX-I-1D434"></use></g><g data-mml-node="TeXAtom" transform="translate(750, -150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use xlink:href="#MJX-828-TEX-N-30"></use></g></g></g></g></g><g data-mml-node="msub" transform="translate(1043.3, -346.3) scale(0.707)"><g data-mml-node="mi"><use xlink:href="#MJX-828-TEX-I-1D434"></use></g><g data-mml-node="TeXAtom" transform="translate(750, -150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use xlink:href="#MJX-828-TEX-N-30"></use></g></g></g><rect width="2662.3" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(3291.3, 0)"><use xlink:href="#MJX-828-TEX-N-29"></use></g><g data-mml-node="mi" transform="translate(3680.3, 0)"><use xlink:href="#MJX-828-TEX-I-1D466"></use></g></g><g data-mml-node="mtd" transform="translate(14330.9, 0)"><g data-mml-node="mo"><use xlink:href="#MJX-828-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(278, 0)"><use xlink:href="#MJX-828-TEX-I-1D466"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(768, 0)"><g data-mml-node="mo"><use xlink:href="#MJX-828-TEX-N-7C"></use></g></g><g data-mml-node="mo" transform="translate(1323.8, 0)"><use xlink:href="#MJX-828-TEX-N-2264"></use></g><g data-mml-node="mfrac" transform="translate(2379.6, 0)"><g data-mml-node="mi" transform="translate(1186, 394) scale(0.707)"><use xlink:href="#MJX-828-TEX-I-1D434"></use></g><g data-mml-node="mrow" transform="translate(220, -346.3) scale(0.707)"><g data-mml-node="mn"><use xlink:href="#MJX-828-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(500, 0)"><use xlink:href="#MJX-828-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(1278, 0)"><g data-mml-node="mi"><use xlink:href="#MJX-828-TEX-N-6C"></use><use xlink:href="#MJX-828-TEX-N-6E" transform="translate(278, 0)"></use></g><g data-mml-node="TeXAtom" transform="translate(834, -150) scale(0.707)" data-mjx-texclass="ORD"></g></g><g data-mml-node="mo" transform="translate(2162, 0)"><use xlink:href="#MJX-828-TEX-N-2061"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2328.7, 0)"><g data-mml-node="msub"><g data-mml-node="mi"><use xlink:href="#MJX-828-TEX-I-1D434"></use></g><g data-mml-node="TeXAtom" transform="translate(750, -150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use xlink:href="#MJX-828-TEX-N-30"></use></g></g></g></g></g><rect width="2662.3" height="60" x="120" y="220"></rect></g></g></g><g data-mml-node="mtr" transform="translate(0, -913.4)"><g data-mml-node="mtd"><g data-mml-node="mfrac"><g data-mml-node="mi" transform="translate(362.7, 394) scale(0.707)"><use xlink:href="#MJX-828-TEX-I-1D434"></use></g><g data-mml-node="msub" transform="translate(220, -346.3) scale(0.707)"><g data-mml-node="mi"><use xlink:href="#MJX-828-TEX-I-1D434"></use></g><g data-mml-node="TeXAtom" transform="translate(750, -150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use xlink:href="#MJX-828-TEX-N-30"></use></g></g></g><rect width="1015.7" height="60" x="120" y="220"></rect></g><g data-mml-node="mi" transform="translate(1255.7, 0)"><use xlink:href="#MJX-828-TEX-N-65"></use><use xlink:href="#MJX-828-TEX-N-78" transform="translate(444, 0)"></use><use xlink:href="#MJX-828-TEX-N-70" transform="translate(972, 0)"></use></g><g data-mml-node="mo" transform="translate(2783.7, 0)"><use xlink:href="#MJX-828-TEX-N-2061"></use></g><g data-mml-node="mo" transform="translate(2783.7, 0)"><use xlink:href="#MJX-828-TEX-N-5B"></use></g><g data-mml-node="mo" transform="translate(3061.7, 0)"><use xlink:href="#MJX-828-TEX-N-28"></use></g><g data-mml-node="mfrac" transform="translate(3450.7, 0)"><g data-mml-node="mrow" transform="translate(220, 457.1) scale(0.707)"><g data-mml-node="mn"><use xlink:href="#MJX-828-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(500, 0)"><use xlink:href="#MJX-828-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(1278, 0)"><use xlink:href="#MJX-828-TEX-N-6C"></use><use xlink:href="#MJX-828-TEX-N-6E" transform="translate(278, 0)"></use></g><g data-mml-node="mo" transform="translate(2112, 0)"><use xlink:href="#MJX-828-TEX-N-2061"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2278.7, 0)"><g data-mml-node="msub"><g data-mml-node="mi"><use xlink:href="#MJX-828-TEX-I-1D434"></use></g><g data-mml-node="TeXAtom" transform="translate(750, -150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use xlink:href="#MJX-828-TEX-N-30"></use></g></g></g></g></g><g data-mml-node="mi" transform="translate(1168.3, -346.3) scale(0.707)"><use xlink:href="#MJX-828-TEX-I-1D434"></use></g><rect width="2626.9" height="60" x="120" y="220"></rect></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(6317.6, 0)"><g data-mml-node="mo"><use xlink:href="#MJX-828-TEX-N-7C"></use></g></g><g data-mml-node="mi" transform="translate(6595.6, 0)"><use xlink:href="#MJX-828-TEX-I-1D466"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(7085.6, 0)"><g data-mml-node="mo"><use xlink:href="#MJX-828-TEX-N-7C"></use></g></g><g data-mml-node="mo" transform="translate(7585.9, 0)"><use xlink:href="#MJX-828-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(8586.1, 0)"><use xlink:href="#MJX-828-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(9086.1, 0)"><use xlink:href="#MJX-828-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(9475.1, 0)"><use xlink:href="#MJX-828-TEX-N-5D"></use></g><g data-mml-node="mi" transform="translate(9753.1, 0)"><use xlink:href="#MJX-828-TEX-I-1D460"></use></g><g data-mml-node="mi" transform="translate(10222.1, 0)"><use xlink:href="#MJX-828-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(10699.1, 0)"><use xlink:href="#MJX-828-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(11299.1, 0)"><use xlink:href="#MJX-828-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(11688.1, 0)"><use xlink:href="#MJX-828-TEX-I-1D466"></use></g><g data-mml-node="mo" transform="translate(12178.1, 0)"><use xlink:href="#MJX-828-TEX-N-29"></use></g></g><g data-mml-node="mtd" transform="translate(13567.1, 0)"><g data-mml-node="mfrac"><g data-mml-node="mi" transform="translate(1186, 394) scale(0.707)"><use xlink:href="#MJX-828-TEX-I-1D434"></use></g><g data-mml-node="mrow" transform="translate(220, -346.3) scale(0.707)"><g data-mml-node="mn"><use xlink:href="#MJX-828-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(500, 0)"><use xlink:href="#MJX-828-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(1278, 0)"><g data-mml-node="mi"><use xlink:href="#MJX-828-TEX-N-6C"></use><use xlink:href="#MJX-828-TEX-N-6E" transform="translate(278, 0)"></use></g><g data-mml-node="TeXAtom" transform="translate(834, -150) scale(0.707)" data-mjx-texclass="ORD"></g></g><g data-mml-node="mo" transform="translate(2162, 0)"><use xlink:href="#MJX-828-TEX-N-2061"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2328.7, 0)"><g data-mml-node="msub"><g data-mml-node="mi"><use xlink:href="#MJX-828-TEX-I-1D434"></use></g><g data-mml-node="TeXAtom" transform="translate(750, -150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use xlink:href="#MJX-828-TEX-N-30"></use></g></g></g></g></g><rect width="2662.3" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(3180.1, 0)"><use xlink:href="#MJX-828-TEX-N-2264"></use></g><g data-mml-node="mi" transform="translate(4235.9, 0)"><use xlink:href="#MJX-828-TEX-I-1D466"></use></g><g data-mml-node="mo" transform="translate(5003.6, 0)"><use xlink:href="#MJX-828-TEX-N-2264"></use></g><g data-mml-node="mi" transform="translate(6059.4, 0)"><use xlink:href="#MJX-828-TEX-I-1D434"></use></g></g></g></g><g data-mml-node="mo" transform="translate(21182.5, 0)"></g></g></g></g></svg></div>

<h3 id="离散信号"><a href="#离散信号" class="headerlink" title="离散信号"></a>离散信号</h3><p>使用连续的方法对信号进行G711A律编码显然计算量很大，而且对于计算机中的音频数据，读取后都是离散的信号集合，因此我们需要一个迫近的连续处理图像的离散函数，此时就有了接下来的13段折线压扩，也就是离散化的方式，此过程也被称为量化。</p>
<p>13段折现法的量化方式为：</p>
<ol>
<li><p>将输入信号的幅度范围归一化为(-1,1);</p>
</li>
<li><p>对x正半轴的区间(0,1)，以1&#x2F;2递减规律将该区间不均匀地分成8段：</p>
<p>以（0，1）的中点1&#x2F;2为界将该区间等分两段；</p>
<p>以（0，1&#x2F;2）的中点1&#x2F;4为界将该区间等分两段；</p>
<p>以（0，1&#x2F;4）的中点1&#x2F;8为界将该区间等分两段；</p>
<p>以（0，1&#x2F;8）的中点1&#x2F;16为界将该区间等分两段；</p>
<p>以（0，1&#x2F;16）的中点1&#x2F;32为界将该区间等分两段；</p>
<p>以（0，1&#x2F;32）的中点1&#x2F;64为界将该区间等分两段；</p>
<p>以 （0，1&#x2F;64）的中点1&#x2F;128为界将该区间等分两段，共计8段；</p>
</li>
<li><p>对于上述的8段区间，每个区间再均匀分成16段；那么，最终整个(0,1)区间被分成128段。</p>
<img src="https://www.z4a.net/images/2023/05/08/x_13.png" style="zoom: 33%;" />
</li>
<li><p>对x负半轴(-1,0)区间，采用上述 2,3的操作将该区间分成128段；这样，最终x轴的（-1，1）区间被分成256个区间。</p>
</li>
<li><p>将y轴（-1,1）区间均匀分成256段 ，共256个量化级。</p>
</li>
<li><p>把x轴和y轴的相应交点连接起来，得到13折线（其中正负轴的第一段和第二段折线斜率相同，合并为一条线段）。</p>
</li>
</ol>
<p>按照步骤可以绘制出以下函数图像：</p>
<img src="https://www.z4a.net/images/2023/05/08/xy_13.png" style="zoom:67%;" />

<p>可以看出，与连续信号编码函数图像十分接近。</p>
<p>解码过程就是编码过程的反操作，因此不再赘述。</p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><p>一般来说，G711 A律编码的输入音频信号的位深为16bit，编码后的位深为8bit，因此接下来都以16bit的音频作为例子。</p>
<p>其中，测试用的音频数据我使用的是如下三段音频：</p>
<ul>
<li>单声道：<code>wav5.wav</code></li>
<li>双声道：<code>wav6.wav</code>,<code>youjianchuiyan.wav</code></li>
</ul>
<h3 id="使用audioop库进行实现"><a href="#使用audioop库进行实现" class="headerlink" title="使用audioop库进行实现"></a>使用audioop库进行实现</h3><p>在Python中，可以直接使用第三方库<code>audioop</code>直接进行G711 A律的编解码操作。在编解码操作之前，需要打开和读取音频，可以使用Python内置的<code>wave</code>库进行读取。</p>
<ul>
<li><p>打开音频：<code>wav_in = wave.open(文件路径,&quot;rb&quot;)</code>，<strong>“rb”是以2进制进行读取。</strong></p>
</li>
<li><p>获取音频信息：<code>nchannels, sampwidth, framerate, nframes, comptype, compname = wav_in.getparams()</code></p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">翻译</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">nchannels</td>
<td align="left">声道数</td>
<td align="left">1为单声道，2为双声道</td>
</tr>
<tr>
<td align="left">sampwidth</td>
<td align="left">采样位宽</td>
<td align="left">每个采样点用多少位，常见为16bit</td>
</tr>
<tr>
<td align="left">framerate</td>
<td align="left">比特率</td>
<td align="left">每秒所包含的数据大小</td>
</tr>
<tr>
<td align="left">nframes</td>
<td align="left">总采样点</td>
<td align="left">离散信号的总采样点（x的个数）</td>
</tr>
<tr>
<td align="left">comptype</td>
<td align="left">压缩类型</td>
<td align="left">指音频采用的压缩标准，如“MPEG”，如没有则显示“None”</td>
</tr>
<tr>
<td align="left">compname</td>
<td align="left">压缩方法</td>
<td align="left">压缩算法或压缩格式，如未压缩显示“not compressed”</td>
</tr>
</tbody></table>
</li>
<li><p>读取音频：<code>wav_in.readframes(nframes)</code></p>
</li>
<li><p>G711 A律编码：<code>audioop.lin2alaw(音频数据，sampwidth)</code></p>
<ul>
<li>sampwidth &#x3D; 1 -&gt; 8 bit的采样位宽，在此过程中就是编码后音频的位宽。</li>
<li>sampwidth &#x3D; 2 -&gt; 16 bit的采样位宽，在此过程中就是输入音频与解码音频的采样位宽。</li>
</ul>
</li>
<li><p>保存音频：</p>
<ol>
<li>设置保存音频的参数：<code>nchannels, sampwidth, framerate, nframes, comptype, compname = wav_in.getparams()</code></li>
<li>写入：<code>wav_out.writeframes(audio_data)</code>，其中audio_data为bit数据流。</li>
</ol>
</li>
</ul>
<p>代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wave</span><br><span class="line"><span class="keyword">import</span> audioop</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">encode_G711</span>(<span class="params">input_path</span>):</span><br><span class="line">    <span class="comment"># 打开 WAV 文件</span></span><br><span class="line">    <span class="keyword">with</span> wave.<span class="built_in">open</span>(input_path, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> wav_in:</span><br><span class="line">        <span class="comment"># 获取采样参数</span></span><br><span class="line">        nchannels, sampwidth, framerate, nframes, comptype, compname = wav_in.getparams()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 读取所有采样值</span></span><br><span class="line">        frames = wav_in.readframes(nframes)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 对采样值进行 A 律压缩编码</span></span><br><span class="line">        compressed_data = audioop.lin2alaw(frames, sampwidth)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 创建新的 WAV 文件并写入压缩后的数据</span></span><br><span class="line">        <span class="keyword">with</span> wave.<span class="built_in">open</span>(<span class="string">&#x27;./output/encode.wav&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> wav_out:</span><br><span class="line">            <span class="comment"># 设置参数</span></span><br><span class="line">            wav_out.setparams((nchannels, sampwidth, framerate, nframes, comptype, compname))</span><br><span class="line">            <span class="comment"># 写入</span></span><br><span class="line">            wav_out.writeframes(compressed_data)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;G.711 A-law encoding is done&#x27;</span>)</span><br><span class="line">            </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">encode_G711</span>(<span class="params">input_path</span>):</span><br><span class="line">    <span class="comment"># 打开 WAV 文件</span></span><br><span class="line">    <span class="keyword">with</span> wave.<span class="built_in">open</span>(input_path, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> wav_in:</span><br><span class="line">        <span class="comment"># 获取采样参数</span></span><br><span class="line">        nchannels, sampwidth, framerate, nframes, comptype, compname = wav_in.getparams()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 读取所有采样值</span></span><br><span class="line">        frames = wav_in.readframes(nframes)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 对采样值进行 A 律压缩解码</span></span><br><span class="line">        compressed_data = audioop.lin2alaw(frames, sampwidth)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 创建新的 WAV 文件并写入压缩后的数据</span></span><br><span class="line">        <span class="keyword">with</span> wave.<span class="built_in">open</span>(<span class="string">&#x27;./output/encode.wav&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> wav_out:</span><br><span class="line">            <span class="comment"># 设置参数</span></span><br><span class="line">            wav_out.setparams((nchannels, sampwidth, framerate, nframes, comptype, compname))</span><br><span class="line">            <span class="comment"># 写入</span></span><br><span class="line">            wav_out.writeframes(compressed_data)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;G.711 A-law encoding is done&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    input_path = <span class="string">&quot;./input/wav6.wav&quot;</span></span><br><span class="line">    encode_G711(input_path)</span><br><span class="line">    input_path = <span class="string">&quot;./output/encode.wav&quot;</span></span><br><span class="line">    decode_G711(input_path)</span><br></pre></td></tr></table></figure>

<p>因为处理的结果与自行编程实现的处理结果一样，因此我只展示自行编程实现的过程，处理结果在[量化——编码](# 量化——编码)与[量化——解码](# 量化——解码)部分有展示。</p>
<h3 id="原理编程实现"><a href="#原理编程实现" class="headerlink" title="原理编程实现"></a>原理编程实现</h3><p>根据G711 A律编码的原理，要实现编码需要经过采样、量化、编码三个过程。</p>
<ul>
<li>采样：将连续的音频数据进行离散化，此步骤还需要将音频bit流转化为整数。</li>
<li>量化：将离散化的数据按照13折现法的量化范围映射到一个固定数量的量化级别上。</li>
<li>编码：将整数转化为bit流，并将其转换为一个8位或者16位二进制数据。</li>
</ul>
<h4 id="采样"><a href="#采样" class="headerlink" title="采样"></a>采样</h4><p><code>audioop</code>库中的<code>linear2alaw</code>与<code>alaw2linear</code>函数，采样与转化bit流的过程并没有体现。所以，不能像调用<code>audioop</code>库一样简单使用<code>wave</code>读取音频数据，将bit流转化为整数的过程也需要单独实现，且需要根据不同的音频格式采取不同的转化策略。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wave</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_audio</span>(<span class="params">input_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    读取音频数据</span></span><br><span class="line"><span class="string">    :param input_path: 音频路径</span></span><br><span class="line"><span class="string">    :return: 读取出的音频数据 -&gt; list</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">with</span> wave.<span class="built_in">open</span>(input_path, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> wav_in:</span><br><span class="line">        <span class="comment"># 获取音频格式信息</span></span><br><span class="line">        nchannels, sampwidth, framerate, nframes, comptype, compname = wav_in.getparams()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;音频格式信息：&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;声道数：<span class="subst">&#123;nchannels&#125;</span>,样本大小：<span class="subst">&#123;sampwidth&#125;</span> ,采样率：<span class="subst">&#123;framerate&#125;</span> ,采样点数：<span class="subst">&#123;nframes&#125;</span>,&quot;</span></span><br><span class="line">              <span class="string">f&quot;压缩类型：<span class="subst">&#123;comptype&#125;</span>，compname：<span class="subst">&#123;compname&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 读取所有采样值</span></span><br><span class="line">        frames = wav_in.readframes(nframes)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 根据不同的sampwidth采取不同的读取策略</span></span><br><span class="line">        <span class="keyword">if</span> sampwidth == <span class="number">1</span>:</span><br><span class="line">            <span class="comment"># 对于采样深度为1的音频，采取一个一个字节读入</span></span><br><span class="line">            audio_data = np.frombuffer(frames, dtype=np.int8).reshape(-<span class="number">1</span>, nchannels).copy()</span><br><span class="line">        <span class="keyword">elif</span> sampwidth == <span class="number">2</span>:</span><br><span class="line">            <span class="comment"># 对于采样深度为2的音频，采取两个两个字节读入</span></span><br><span class="line">            audio_data = np.frombuffer(frames, dtype=np.int16).reshape(-<span class="number">1</span>, nchannels).copy()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># print(audio_data.shape)</span></span><br><span class="line">        <span class="comment"># 如果音频为双声道，需要将其分为左右声道</span></span><br><span class="line">        <span class="keyword">if</span> nchannels == <span class="number">2</span>:</span><br><span class="line">            left_channel = audio_data[:, <span class="number">0</span>]</span><br><span class="line">            right_channel = audio_data[:, <span class="number">1</span>]</span><br><span class="line">            <span class="comment"># 将左右声道数据装入一个list中</span></span><br><span class="line">            left_right_data = [left_channel, right_channel]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            left_right_data = [audio_data[:, <span class="number">0</span>]]</span><br><span class="line">    <span class="keyword">return</span> left_right_data, nchannels, sampwidth, framerate, nframes</span><br></pre></td></tr></table></figure>

<p>对于不同的sampwidth，使用<code>np.frombuffer</code>读取时，读取后的返回值为整数列表，对于不同的采样宽度：</p>
<ul>
<li>sampwidth &#x3D; 1 时，<code>dtype=np.int8</code>采取一个一个字节读入的方式</li>
<li>sampwidth &#x3D; 2 时，<code>dtype=np.int16</code>采取两个两个字节读入的方式</li>
</ul>
<p>当输入音频的声道数为2时，不能直接像单声道那样直接处理，而是应该将左右声道分开处理，后续对其分别进行编码与解码的操作。<code>reshape(-1, nchannels)</code>是为了方便将采样数据分离。</p>
<ul>
<li>nchannels &#x3D; 2 时，将采样数据分为<code>audio_data[:, 0]</code>和<code>audio_data[:, 1]</code></li>
<li>nchannels &#x3D; 1 时，不进行分开处理，但为了格式与<code>nchannels = 2</code>保持一致，还是使用<code>[audio_data[:, 0]]</code>作为最后的读取结果。</li>
</ul>
<h4 id="量化——编码"><a href="#量化——编码" class="headerlink" title="量化——编码"></a>量化——编码</h4><p>对转化为整数的数据列表，根据13折现法进行编码量化，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> alive_progress <span class="keyword">import</span> alive_bar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 符号位掩码</span></span><br><span class="line">SIGN_BIT = <span class="number">128</span></span><br><span class="line"><span class="comment"># 量化位掩码</span></span><br><span class="line">QUANT_MASK = <span class="number">15</span></span><br><span class="line"><span class="comment"># 段偏移码</span></span><br><span class="line">SEG_SHIFT = <span class="number">4</span></span><br><span class="line"><span class="comment"># 段掩码</span></span><br><span class="line">SEG_MASK = <span class="number">112</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义编码的划分点</span></span><br><span class="line">seg_aend = [<span class="number">31</span>, <span class="number">63</span>, <span class="number">127</span>, <span class="number">255</span>, <span class="number">511</span>, <span class="number">1023</span>, <span class="number">2047</span>, <span class="number">4095</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">linear2alaw</span>(<span class="params">audio_data</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    对音频数据进行G711A律编码</span></span><br><span class="line"><span class="string">    :param audio_data: 待编码音频数据</span></span><br><span class="line"><span class="string">    :return: 编码后的音频数据 -&gt; list</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 用于储存编码结果</span></span><br><span class="line">    result = <span class="built_in">list</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;---G711 a-law encoding begins---&quot;</span>)</span><br><span class="line">    <span class="comment"># 使用进度条方便查看处理进度</span></span><br><span class="line">    <span class="keyword">with</span> alive_bar(<span class="built_in">len</span>(audio_data), force_tty=<span class="literal">True</span>) <span class="keyword">as</span> bar:</span><br><span class="line">        <span class="keyword">for</span> pcm_val <span class="keyword">in</span> audio_data:</span><br><span class="line">            <span class="comment"># 右移 3 位相当于除以 8</span></span><br><span class="line">            pcm_val = pcm_val &gt;&gt; <span class="number">3</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># 设置掩码值</span></span><br><span class="line">            <span class="keyword">if</span> pcm_val &gt;= <span class="number">0</span>:</span><br><span class="line">                mask = <span class="number">213</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                mask = <span class="number">85</span></span><br><span class="line">                pcm_val = -pcm_val - <span class="number">1</span></span><br><span class="line">            <span class="comment"># 确定pcm_val所属的段</span></span><br><span class="line">            seg = search(pcm_val, seg_aend, <span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 超出预期线性段范围</span></span><br><span class="line">            <span class="keyword">if</span> seg &gt;= <span class="number">8</span>:</span><br><span class="line">                result.append(<span class="number">127</span> ^ mask)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># 计算编码值的高 3 位</span></span><br><span class="line">                aval = seg &lt;&lt; SEG_SHIFT</span><br><span class="line">                <span class="keyword">if</span> seg &lt; <span class="number">2</span>:</span><br><span class="line">                    aval |= (pcm_val &gt;&gt; <span class="number">1</span>) &amp; QUANT_MASK</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    aval |= (pcm_val &gt;&gt; seg) &amp; QUANT_MASK</span><br><span class="line">                <span class="comment"># 计算完整 A-law 编码值并添加到result中</span></span><br><span class="line">                result.append(aval ^ mask)</span><br><span class="line">            bar()</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>

<h4 id="量化——解码"><a href="#量化——解码" class="headerlink" title="量化——解码"></a>量化——解码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">alaw2linear</span>(<span class="params">encode_data</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    G711 a律解码</span></span><br><span class="line"><span class="string">    :param encode_data: 经过编码的音频数据</span></span><br><span class="line"><span class="string">    :return: 解码后的音频数据 -&gt; list</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 用于储存解码结果</span></span><br><span class="line">    result = <span class="built_in">list</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;---G711 a-law decoding begins---&quot;</span>)</span><br><span class="line">    <span class="comment"># 使用进度条方便查看处理进度</span></span><br><span class="line">    <span class="keyword">with</span> alive_bar(<span class="built_in">len</span>(encode_data), force_tty=<span class="literal">True</span>) <span class="keyword">as</span> bar:</span><br><span class="line">        <span class="keyword">for</span> a_val <span class="keyword">in</span> encode_data:</span><br><span class="line">            <span class="comment"># 将正负分离</span></span><br><span class="line">            a_val ^= <span class="number">85</span></span><br><span class="line">            <span class="comment"># 计算 t 的低 12 位</span></span><br><span class="line">            t = (a_val &amp; QUANT_MASK) &lt;&lt; <span class="number">4</span></span><br><span class="line">            <span class="comment"># 计算线性段索引</span></span><br><span class="line">            seg = (a_val &amp; SEG_MASK) &gt;&gt; SEG_SHIFT</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 计算解码值</span></span><br><span class="line">            <span class="keyword">if</span> seg == <span class="number">0</span>:</span><br><span class="line">                t += <span class="number">8</span></span><br><span class="line">            <span class="keyword">elif</span> seg == <span class="number">1</span>:</span><br><span class="line">                t += <span class="number">264</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                t += <span class="number">264</span></span><br><span class="line">                t &lt;&lt;= seg - <span class="number">1</span></span><br><span class="line">            <span class="comment"># 确定符号并将结果加入result</span></span><br><span class="line">            <span class="keyword">if</span> a_val &amp; SIGN_BIT:</span><br><span class="line">                result.append(t)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result.append(-t)</span><br><span class="line">            bar()</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>

<h4 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h4><p>因为在<code>read_audio</code>函数（音频读取部分）我们对<code>nchannels = 2</code>的音频进行了分开处理，所以我们保存音频的部分需要将分开的后的音频数据合并，这边我使用<code>np.column_stack</code>将分离后的数据合并。</p>
<p>对于<code>nchannels = 1的音频数据，因为在</code>read_audio<code>函数中保持了相同的格式，所以另一个声道数据为</code>[]&#96;。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">import</span> wave</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> chain</span><br><span class="line"><span class="keyword">from</span> alive_progress <span class="keyword">import</span> alive_bar</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_audio</span>(<span class="params">output_path, data, nchannels, sampwidth, framerate, nframes, processbar=<span class="number">1</span></span>):</span><br><span class="line">    <span class="comment"># 将所有通道的数据组合</span></span><br><span class="line">    recovered_audio_data = np.column_stack(<span class="built_in">tuple</span>(data))</span><br><span class="line">    data = recovered_audio_data</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(sampwidth)</span></span><br><span class="line">    <span class="comment"># 获取进度条的总进度</span></span><br><span class="line">    <span class="keyword">if</span> nchannels == <span class="number">2</span>:</span><br><span class="line">        processbar = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将整数数组转换为字节流</span></span><br><span class="line">    byte_stream = io.BytesIO()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;---Audio is being synthesized---&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> sampwidth == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">with</span> alive_bar(<span class="built_in">len</span>(data) * processbar, force_tty=<span class="literal">True</span>) <span class="keyword">as</span> bar:</span><br><span class="line">            <span class="keyword">for</span> sample <span class="keyword">in</span> chain.from_iterable(data):</span><br><span class="line">                <span class="comment"># &#x27;B&#x27;：无符号整数，将整数转换为一个长度为1字节的字符串</span></span><br><span class="line">                byte_stream.write(struct.pack(<span class="string">&#x27;B&#x27;</span>, sample))</span><br><span class="line">                bar()</span><br><span class="line">    <span class="keyword">elif</span> sampwidth == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">with</span> alive_bar(<span class="built_in">len</span>(data) * processbar, force_tty=<span class="literal">True</span>) <span class="keyword">as</span> bar:</span><br><span class="line">            <span class="keyword">for</span> sample <span class="keyword">in</span> chain.from_iterable(data):</span><br><span class="line">                <span class="comment"># &#x27;h&#x27; 有符号短整型，将整数转换为一个长度为2字节的字符串</span></span><br><span class="line">                byte_stream.write(struct.pack(<span class="string">&#x27;h&#x27;</span>, <span class="built_in">int</span>(sample)))</span><br><span class="line">                bar()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将字节流写入</span></span><br><span class="line">    <span class="keyword">with</span> wave.<span class="built_in">open</span>(output_path, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> wav_out:</span><br><span class="line">        <span class="comment"># 设置音频参数</span></span><br><span class="line">        wav_out.setnchannels(nchannels)</span><br><span class="line">        wav_out.setsampwidth(sampwidth)</span><br><span class="line">        wav_out.setframerate(framerate)</span><br><span class="line">        wav_out.setnframes(nframes)</span><br><span class="line">        <span class="comment"># 按照参数将字节流写入</span></span><br><span class="line">        wav_out.writeframes(byte_stream.getvalue())</span><br><span class="line">    <span class="keyword">if</span> sampwidth == <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;---G.711 A-law encoding is done---&#x27;</span>)</span><br><span class="line">    <span class="keyword">elif</span> sampwidth == <span class="number">2</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;---G.711 A-law decoding is done---&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;The audio is saved in &#x27;<span class="subst">&#123;output_path&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<p>对于整数数组转换为字节流的过程中，对于不同的<code>sampwidth</code>，我们需要采取不同二进制打包策略，不然无法正确输出音频文件。</p>
<ul>
<li>sampwidth &#x3D; 1 时，数据经过<code>linear2alaw</code>函数的编码，因此我们需要将整数转换为一个长度为1字节的字符串，使用<code>&#39;B&#39;：无符号整数</code>的打包格式</li>
<li>sampwidth &#x3D; 1 时，数据经过<code>alaw2linear</code>函数的解码，因此我们需要将整数转换为一个长度为2字节的字符串，使用<code>&#39;h&#39;：有符号短整型</code>的打包格式</li>
</ul>
<p>在最后使用<code>wav</code>进行音频文件的输出时，根据目的不同使用不同的<code>sampwidth </code>取值。</p>
<ul>
<li>编码后的数据，采样位深一般由 2 → 1。</li>
<li>解码后的数据，采样位深一般由 1 → 2。</li>
</ul>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p>由于在<code>read_audio</code>函数中将左右声道数据分开后打包装入<code>left_right_data</code>列表中，所以需要使用循环将其取出。处理后将其打包装入<code>data</code>列表中，方便后续<code>save_audio</code>函数处理。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_g711</span>(<span class="params">audio_data, <span class="built_in">type</span>=<span class="number">1</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    对音频进行编码与解码操作</span></span><br><span class="line"><span class="string">    :param audio_data:待处理的音频数据</span></span><br><span class="line"><span class="string">    :param type:处理类型：1-编码 2-解码</span></span><br><span class="line"><span class="string">    :return:处理后的数据 -&gt; list</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    data = []</span><br><span class="line">    <span class="comment"># 读取所有通道的音频信息</span></span><br><span class="line">    <span class="keyword">for</span> channel <span class="keyword">in</span> audio_data:</span><br><span class="line">        <span class="comment"># 编码操作</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">type</span> == <span class="number">1</span>:</span><br><span class="line">            encoded_channel = linear2alaw(channel)</span><br><span class="line">            data.append(encoded_channel)</span><br><span class="line">        <span class="comment"># 解码操作</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            decoded_channel = alaw2linear(channel)</span><br><span class="line">            data.append(decoded_channel)</span><br><span class="line">    <span class="keyword">return</span> data</span><br></pre></td></tr></table></figure>

<h5 id="G711A律编码结果"><a href="#G711A律编码结果" class="headerlink" title="G711A律编码结果"></a>G711A律编码结果</h5><p>测试对象我选择了<code>wav5.wav</code>、<code>wav6.wav</code>作为处理对象，分别对应音频单声道与双声道的情况。下面只展示<code>linear2alaw</code>函数处理的结果。</p>
<p>结果及分析：</p>
<ul>
<li><p><code>wav5.wav</code></p>
<p>程序输出结果：</p>
<img src="https://z4a.net/images/2023/05/05/wav5_en.png" alt="image-20230505164211005" style="zoom: 67%;" />

<p>使用<code>ffprobe -i wav5_encode.wav -show_format</code>命令查看格式信息：</p>
<img src="https://z4a.net/images/2023/05/05/wav5_or_en.png" alt="image-20230505164602673" style="zoom: 80%;" />
</li>
<li><p><code>wav6.wav</code></p>
<p>程序输出结果：</p>
<img src="https://z4a.net/images/2023/05/05/wav6_en.png" alt="image-20230505164329917" style="zoom:67%;" />

<p>使用<code>ffprobe -i wav6_encode.wav -show_format</code>命令查看格式信息：</p>
</li>
</ul>
<img src="https://z4a.net/images/2023/05/05/wav6_or_en.png" alt="image-20230505164758748" style="zoom:80%;" />

<p><strong>从格式上可以看出，<code>size</code>与<code>bit_rate</code>都相比原音频减少了约1&#x2F;2</strong>。其他参数并没有明显变化。播放编码后的音频<code>wav5_encode.wav</code>和<code>wav6_encode.wav</code>，<strong>可以听出有非常明显的杂音，类似于老电视机的沙沙声，但是人声得以保留，有一部分语音确实有些损坏，只有仔细才能听出说话的内容。</strong></p>
<h5 id="G711A律解码结果"><a href="#G711A律解码结果" class="headerlink" title="G711A律解码结果"></a>G711A律解码结果</h5><p>测试对象使用编码后的<code>wav5_encode.wav</code>、<code>wav6_encode.wav</code>，分别对应音频单声道与双声道的情况。下面只展示<code>alaw2linear</code>函数处理的结果，使用<code>audioop</code>库的处理结果相同。</p>
<p>结果及分析：</p>
<ul>
<li><p><code>wav5_encode.wav</code></p>
<img src="https://z4a.net/images/2023/05/05/wav5_de.png" alt="image-20230505165948766" style="zoom:67%;" />

<p>使用<code>ffprobe -i wav5_decode.wav -show_format</code>命令查看格式信息：</p>
<img src="https://z4a.net/images/2023/05/05/wav5_en_de.png" alt="image-20230505170215701" style="zoom: 67%;" />
</li>
<li><p><code>wav6_encode.wav</code></p>
<img src="https://z4a.net/images/2023/05/05/wav6_de.png" alt="image-20230505170017115" style="zoom:67%;" />

<p>使用<code>ffprobe -i wav6_decode.wav -show_format</code>命令查看格式信息：</p>
<img src="https://z4a.net/images/2023/05/05/wav6_en_de.png" alt="image-20230505170339724" style="zoom:67%;" /></li>
</ul>
<p>从格式上可以看出<code>wav5_decode.wav</code>与<code>wav6_decode.wav	</code>的<code>size</code>与<code>bit_rate</code>分别是<code>wav5_encode.wav</code>与<code>wav6_encode.wav</code>的两倍，也就是这两项指数回到了原音频的水准。</p>
<p>使用播放器播放<code>wav5_decode.wav</code>与<code>wav6_decode.wav</code>，与原音频<code>wav5.wav</code>、<code>wav6.wav</code>听起来几乎没有差别。</p>
<h5 id="效率与进度条"><a href="#效率与进度条" class="headerlink" title="效率与进度条"></a>效率与进度条</h5><p>如果输出的是老师准备的<code>youjianchuiyan.wav</code>（时长：3分15秒），那么处理时长会有点长（2分半左右）。因为运行效率不高，所以为了更加直观查看到处理的过程，我采用<code>alive_bar</code>库对编码、解码、转换为字节流的部分添加上了进度条，这在编解码与结果展示部分也有体现。</p>
<img src="https://z4a.net/images/2023/05/05/youjian_en_de.png" alt="image-20230505190307758" style="zoom: 67%;" />

<p>这是因为编码函数<code>linear2alaw</code>与解码函数<code>alaw2linear</code>使用的是for循环对值进行一个个的处理，因此处理效率较为低下。但是编码与解码的过程可以完美的实现，且可以满足大部分音频的G711A律压扩的要求。</p>
<h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">import</span> wave</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> chain</span><br><span class="line"><span class="keyword">from</span> alive_progress <span class="keyword">import</span> alive_bar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 符号位掩码</span></span><br><span class="line">SIGN_BIT = <span class="number">128</span></span><br><span class="line"><span class="comment"># 量化位掩码</span></span><br><span class="line">QUANT_MASK = <span class="number">15</span></span><br><span class="line"><span class="comment"># 段偏移码</span></span><br><span class="line">SEG_SHIFT = <span class="number">4</span></span><br><span class="line"><span class="comment"># 段掩码</span></span><br><span class="line">SEG_MASK = <span class="number">112</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义编码的划分点</span></span><br><span class="line">seg_aend = [<span class="number">31</span>, <span class="number">63</span>, <span class="number">127</span>, <span class="number">255</span>, <span class="number">511</span>, <span class="number">1023</span>, <span class="number">2047</span>, <span class="number">4095</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">val, array, size</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    在给定数组中查找 val小于等于的元素，并返回索引</span></span><br><span class="line"><span class="string">    :param val: 输入值</span></span><br><span class="line"><span class="string">    :param array: 划分点列表</span></span><br><span class="line"><span class="string">    :param size: 线性段的数目</span></span><br><span class="line"><span class="string">    :return: 返回线性段索引</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(size):</span><br><span class="line">        <span class="keyword">if</span> val &lt;= array[i]:</span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line">    <span class="keyword">return</span> size</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">linear2alaw</span>(<span class="params">audio_data</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    对音频数据进行G711A律编码</span></span><br><span class="line"><span class="string">    :param audio_data: 待编码音频数据</span></span><br><span class="line"><span class="string">    :return: 编码后的音频数据 -&gt; list</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 用于储存编码结果</span></span><br><span class="line">    result = <span class="built_in">list</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;---G711 a-law encoding begins---&quot;</span>)</span><br><span class="line">    <span class="comment"># 使用进度条方便查看处理进度</span></span><br><span class="line">    <span class="keyword">with</span> alive_bar(<span class="built_in">len</span>(audio_data), force_tty=<span class="literal">True</span>) <span class="keyword">as</span> bar:</span><br><span class="line">        <span class="keyword">for</span> pcm_val <span class="keyword">in</span> audio_data:</span><br><span class="line">            <span class="comment"># 右移 3 位相当于除以 8</span></span><br><span class="line">            pcm_val = pcm_val &gt;&gt; <span class="number">3</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># 设置掩码值</span></span><br><span class="line">            <span class="keyword">if</span> pcm_val &gt;= <span class="number">0</span>:</span><br><span class="line">                mask = <span class="number">213</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                mask = <span class="number">85</span></span><br><span class="line">                pcm_val = -pcm_val - <span class="number">1</span></span><br><span class="line">            <span class="comment"># 确定pcm_val所属的段</span></span><br><span class="line">            seg = search(pcm_val, seg_aend, <span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 超出预期线性段范围</span></span><br><span class="line">            <span class="keyword">if</span> seg &gt;= <span class="number">8</span>:</span><br><span class="line">                result.append(<span class="number">127</span> ^ mask)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># 计算编码值的高 3 位</span></span><br><span class="line">                aval = seg &lt;&lt; SEG_SHIFT</span><br><span class="line">                <span class="keyword">if</span> seg &lt; <span class="number">2</span>:</span><br><span class="line">                    aval |= (pcm_val &gt;&gt; <span class="number">1</span>) &amp; QUANT_MASK</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    aval |= (pcm_val &gt;&gt; seg) &amp; QUANT_MASK</span><br><span class="line">                <span class="comment"># 计算完整 A-law 编码值并添加到result中</span></span><br><span class="line">                result.append(aval ^ mask)</span><br><span class="line">            bar()</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">alaw2linear</span>(<span class="params">encode_data</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    G711 a律解码</span></span><br><span class="line"><span class="string">    :param encode_data: 经过编码的音频数据</span></span><br><span class="line"><span class="string">    :return: 解码后的音频数据 -&gt; list</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 用于储存解码结果</span></span><br><span class="line">    result = <span class="built_in">list</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;---G711 a-law decoding begins---&quot;</span>)</span><br><span class="line">    <span class="comment"># 使用进度条方便查看处理进度</span></span><br><span class="line">    <span class="keyword">with</span> alive_bar(<span class="built_in">len</span>(encode_data), force_tty=<span class="literal">True</span>) <span class="keyword">as</span> bar:</span><br><span class="line">        <span class="keyword">for</span> a_val <span class="keyword">in</span> encode_data:</span><br><span class="line">            <span class="comment"># 将正负分离</span></span><br><span class="line">            a_val ^= <span class="number">85</span></span><br><span class="line">            <span class="comment"># 计算 t 的低 12 位</span></span><br><span class="line">            t = (a_val &amp; QUANT_MASK) &lt;&lt; <span class="number">4</span></span><br><span class="line">            <span class="comment"># 计算线性段索引</span></span><br><span class="line">            seg = (a_val &amp; SEG_MASK) &gt;&gt; SEG_SHIFT</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 计算解码值</span></span><br><span class="line">            <span class="keyword">if</span> seg == <span class="number">0</span>:</span><br><span class="line">                t += <span class="number">8</span></span><br><span class="line">            <span class="keyword">elif</span> seg == <span class="number">1</span>:</span><br><span class="line">                t += <span class="number">264</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                t += <span class="number">264</span></span><br><span class="line">                t &lt;&lt;= seg - <span class="number">1</span></span><br><span class="line">            <span class="comment"># 确定符号并将结果加入result</span></span><br><span class="line">            <span class="keyword">if</span> a_val &amp; SIGN_BIT:</span><br><span class="line">                result.append(t)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result.append(-t)</span><br><span class="line">            bar()</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_audio</span>(<span class="params">input_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    读取音频数据</span></span><br><span class="line"><span class="string">    :param input_path: 音频路径</span></span><br><span class="line"><span class="string">    :return: 读取出的音频数据 -&gt; list</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">with</span> wave.<span class="built_in">open</span>(input_path, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> wav_in:</span><br><span class="line">        <span class="comment"># 获取音频格式信息</span></span><br><span class="line">        nchannels, sampwidth, framerate, nframes, comptype, compname = wav_in.getparams()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;音频格式信息：&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;声道数：<span class="subst">&#123;nchannels&#125;</span>,样本大小：<span class="subst">&#123;sampwidth&#125;</span> ,采样率：<span class="subst">&#123;framerate&#125;</span> ,采样点数：<span class="subst">&#123;nframes&#125;</span>,&quot;</span></span><br><span class="line">              <span class="string">f&quot;压缩类型：<span class="subst">&#123;comptype&#125;</span>，compname：<span class="subst">&#123;compname&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 读取所有采样值</span></span><br><span class="line">        frames = wav_in.readframes(nframes)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 根据不同的sampwidth采取不同的读取策略</span></span><br><span class="line">        <span class="keyword">if</span> sampwidth == <span class="number">1</span>:</span><br><span class="line">            <span class="comment"># 对于采样深度为1的音频，采取一个一个字节读入</span></span><br><span class="line">            audio_data = np.frombuffer(frames, dtype=np.int8).reshape(-<span class="number">1</span>, nchannels).copy()</span><br><span class="line">        <span class="keyword">elif</span> sampwidth == <span class="number">2</span>:</span><br><span class="line">            <span class="comment"># 对于采样深度为2的音频，采取两个两个字节读入</span></span><br><span class="line">            audio_data = np.frombuffer(frames, dtype=np.int16).reshape(-<span class="number">1</span>, nchannels).copy()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># print(audio_data.shape)</span></span><br><span class="line">        <span class="comment"># 如果音频为双声道，需要将其分为左右声道</span></span><br><span class="line">        <span class="keyword">if</span> nchannels == <span class="number">2</span>:</span><br><span class="line">            left_channel = audio_data[:, <span class="number">0</span>]</span><br><span class="line">            right_channel = audio_data[:, <span class="number">1</span>]</span><br><span class="line">            <span class="comment"># 将左右声道数据装入一个list中</span></span><br><span class="line">            left_right_data = [left_channel, right_channel]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            left_right_data = [audio_data[:, <span class="number">0</span>]]</span><br><span class="line">    <span class="keyword">return</span> left_right_data, nchannels, sampwidth, framerate, nframes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_audio</span>(<span class="params">output_path, data, nchannels, sampwidth, framerate, nframes, processbar=<span class="number">1</span></span>):</span><br><span class="line">    <span class="comment"># 将所有通道的数据组合</span></span><br><span class="line">    recovered_audio_data = np.column_stack(<span class="built_in">tuple</span>(data))</span><br><span class="line">    data = recovered_audio_data</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(sampwidth)</span></span><br><span class="line">    <span class="comment"># 获取进度条的总进度</span></span><br><span class="line">    <span class="keyword">if</span> nchannels == <span class="number">2</span>:</span><br><span class="line">        processbar = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将元组转换为字节流</span></span><br><span class="line">    byte_stream = io.BytesIO()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;---Audio is being synthesized---&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> sampwidth == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">with</span> alive_bar(<span class="built_in">len</span>(data) * processbar, force_tty=<span class="literal">True</span>) <span class="keyword">as</span> bar:</span><br><span class="line">            <span class="keyword">for</span> sample <span class="keyword">in</span> chain.from_iterable(data):</span><br><span class="line">                <span class="comment"># &#x27;B&#x27;：无符号整数，将整数转换为一个长度为1字节的字符串</span></span><br><span class="line">                byte_stream.write(struct.pack(<span class="string">&#x27;B&#x27;</span>, sample))</span><br><span class="line">                bar()</span><br><span class="line">    <span class="keyword">elif</span> sampwidth == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">with</span> alive_bar(<span class="built_in">len</span>(data) * processbar, force_tty=<span class="literal">True</span>) <span class="keyword">as</span> bar:</span><br><span class="line">            <span class="keyword">for</span> sample <span class="keyword">in</span> chain.from_iterable(data):</span><br><span class="line">                <span class="comment"># &#x27;h&#x27; 表示有符号短整型，将整数转换为一个长度为2字节的字符串</span></span><br><span class="line">                byte_stream.write(struct.pack(<span class="string">&#x27;h&#x27;</span>, <span class="built_in">int</span>(sample)))</span><br><span class="line">                bar()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将字节流写入</span></span><br><span class="line">    <span class="keyword">with</span> wave.<span class="built_in">open</span>(output_path, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> wav_out:</span><br><span class="line">        <span class="comment"># 设置音频参数</span></span><br><span class="line">        wav_out.setnchannels(nchannels)</span><br><span class="line">        wav_out.setsampwidth(sampwidth)</span><br><span class="line">        wav_out.setframerate(framerate)</span><br><span class="line">        wav_out.setnframes(nframes)</span><br><span class="line">        <span class="comment"># 按照参数将字节流写入</span></span><br><span class="line">        wav_out.writeframes(byte_stream.getvalue())</span><br><span class="line">    <span class="keyword">if</span> sampwidth == <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;---G.711 A-law encoding is done---&#x27;</span>)</span><br><span class="line">    <span class="keyword">elif</span> sampwidth == <span class="number">2</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;---G.711 A-law decoding is done---&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;The audio is saved in &#x27;<span class="subst">&#123;output_path&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_g711</span>(<span class="params">audio_data, <span class="built_in">type</span>=<span class="number">1</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    对音频进行编码与解码操作</span></span><br><span class="line"><span class="string">    :param audio_data:待处理的音频数据</span></span><br><span class="line"><span class="string">    :param type:处理类型：1-编码 2-解码</span></span><br><span class="line"><span class="string">    :return:处理后的数据 -&gt; list</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    data = []</span><br><span class="line">    <span class="comment"># 读取所有通道的音频信息</span></span><br><span class="line">    <span class="keyword">for</span> channel <span class="keyword">in</span> audio_data:</span><br><span class="line">        <span class="comment"># 编码操作</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">type</span> == <span class="number">1</span>:</span><br><span class="line">            encoded_channel = linear2alaw(channel)</span><br><span class="line">            data.append(encoded_channel)</span><br><span class="line">        <span class="comment"># 解码操作</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            decoded_channel = alaw2linear(channel)</span><br><span class="line">            data.append(decoded_channel)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 编码</span></span><br><span class="line">    input_path = <span class="string">&quot;./input/wav6.wav&quot;</span></span><br><span class="line">    audio_data, nchannels, sampwidth, framerate, nframes = read_audio(input_path)</span><br><span class="line">    encoded_data = test_g711(audio_data, <span class="built_in">type</span>=<span class="number">1</span>)</span><br><span class="line">    <span class="comment"># print(encoded_data)</span></span><br><span class="line">    save_audio(output_path=<span class="string">&quot;./output/encode_demo.wav&quot;</span>, data=encoded_data, nchannels=nchannels, sampwidth=<span class="number">1</span>,</span><br><span class="line">               framerate=framerate, nframes=nframes)</span><br><span class="line">    <span class="comment"># 解码</span></span><br><span class="line">    encode_path = <span class="string">&quot;./output/encode_demo.wav&quot;</span></span><br><span class="line">    audio_data, nchannels, sampwidth, framerate, nframes = read_audio(encode_path)</span><br><span class="line">    decoded_data = test_g711(audio_data, <span class="built_in">type</span>=<span class="number">2</span>)</span><br><span class="line">    save_audio(output_path=<span class="string">&quot;./output/decode_demo.wav&quot;</span>, data=decoded_data, nchannels=nchannels, sampwidth=<span class="number">2</span>,</span><br><span class="line">               framerate=framerate, nframes=nframes)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>音频处理——G711A-law编码</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://ldm0715.github.io/post/yin-pin-chu-li-g711a-lu-bian-ma/">https://ldm0715.github.io/post/yin-pin-chu-li-g711a-lu-bian-ma/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>gcnanmu</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2023-05-08</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2024-05-07</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a><a class="post-meta__tags" href="/tags/%E9%9F%B3%E8%A7%86%E9%A2%91%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86/">音视频信号处理</a></div><div class="post_share"><div class="social-share" data-image="https://www.z4a.net/images/2024/05/06/G711A.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/ffmpeg-yi-xie-jian-dan-de-shi-pin-chu-li/" title="FFmpeg-简单的视频处理"><img class="cover" src="https://www.z4a.net/images/2024/05/06/ffmpeg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">FFmpeg-简单的视频处理</div></div></a></div><div class="next-post pull-right"><a href="/post/ji-qi-shi-jue-sheng-cheng-gao-si-jin-zi-ta/" title="OpenCV-高斯金字塔"><img class="cover" src="https://www.z4a.net/images/2024/05/06/c4fa2d00fd85fdd89dd4c80c9fd2c35c.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">OpenCV-高斯金字塔</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#G711A%E5%BE%8B%E7%BC%96%E7%A0%81%E5%8E%9F%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">G711A律编码原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E5%9D%87%E5%8C%80PCM"><span class="toc-number">2.1.</span> <span class="toc-text">非均匀PCM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E7%BB%AD%E4%BF%A1%E5%8F%B7"><span class="toc-number">2.2.</span> <span class="toc-text">连续信号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A6%BB%E6%95%A3%E4%BF%A1%E5%8F%B7"><span class="toc-number">2.3.</span> <span class="toc-text">离散信号</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.</span> <span class="toc-text">代码实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8audioop%E5%BA%93%E8%BF%9B%E8%A1%8C%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.1.</span> <span class="toc-text">使用audioop库进行实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%90%86%E7%BC%96%E7%A8%8B%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.2.</span> <span class="toc-text">原理编程实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%87%E6%A0%B7"><span class="toc-number">3.2.1.</span> <span class="toc-text">采样</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8F%E5%8C%96%E2%80%94%E2%80%94%E7%BC%96%E7%A0%81"><span class="toc-number">3.2.2.</span> <span class="toc-text">量化——编码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8F%E5%8C%96%E2%80%94%E2%80%94%E8%A7%A3%E7%A0%81"><span class="toc-number">3.2.3.</span> <span class="toc-text">量化——解码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A0%81"><span class="toc-number">3.2.4.</span> <span class="toc-text">编码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">3.2.5.</span> <span class="toc-text">测试</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#G711A%E5%BE%8B%E7%BC%96%E7%A0%81%E7%BB%93%E6%9E%9C"><span class="toc-number">3.2.5.1.</span> <span class="toc-text">G711A律编码结果</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#G711A%E5%BE%8B%E8%A7%A3%E7%A0%81%E7%BB%93%E6%9E%9C"><span class="toc-number">3.2.5.2.</span> <span class="toc-text">G711A律解码结果</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%88%E7%8E%87%E4%B8%8E%E8%BF%9B%E5%BA%A6%E6%9D%A1"><span class="toc-number">3.2.5.3.</span> <span class="toc-text">效率与进度条</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81"><span class="toc-number">3.3.</span> <span class="toc-text">完整代码</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">Copyright &copy;2022 - 2024 By gcnanmu</div><div class="framework-info"><div id="moe" style="height:40px;display: inline-block;">
<a href="https://icp.gov.moe/?keyword=20244696" target="_blank">
<img  src="https://linguoguang.com/img/ico64.png"> 萌ICP备20244696号
</a>
</div>
<div id="miit" style="height:40px;display: inline-block;">
<a target="_blank" rel="noopener" href="https://beian.miit.cn.com/gov/search.php?domain=hexo.gcnanmu3125.xyz" title="MIIT备20240562号">
<img src="https://beian.miit.cn.com/logo.svg" alt="MIIT" width="32"> MIIT20240562号
</a>
</div></div><a target="_blank" rel="noopener" href="https://notbyai.fyi/">
<img src="/img/Written-By-Human-Not-By-AI-Badge-white.png" alt="Written-By-Human-Not-By-A" width="110">
</a> 
<a href="https://www.travellings.cn/go.html" target="_blank" rel="noopener" title="开往-友链接力">
<img src="https://www.travellings.cn/assets/logo.gif" alt="开往-友链接力" width="120">
</a>
<a href="https://www.foreverblog.cn/go.html" target="_blank"> 
<img src="https://img.foreverblog.cn/wormhole_2_tp.gif" alt="" style="width:auto;height:32px;" title="穿梭虫洞-随机访问十年之约友链博客">
</a></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="右键模式" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="share" type="button" title="分享链接" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:window.scrollTo(0, 0);"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>百度搜索</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>空降评论</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>随便逛逛</span></a><a class="rightMenu-item" href="javascript:rmf.switchReadMode();"><i class="fa fa-book"></i><span>阅读模式</span></a><a class="rightMenu-item" href="/about/"><i class="fa fa-info-circle"></i><span>关于博客</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>切换全屏</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>打印页面</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addModeChange('mermaid', runMermaid)

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'R2gIzaVCo5mQPnjj80trjDQ9-gzGzoHsz',
      appKey: 'U0decE1mFeJg9vbglhkkE20P',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script async src="https://at.alicdn.com/t/c/font_3962437_6snoplzeg9u.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script src="/js/vue.js"></script><script src="/js/runtime.js"></script><script src="/js/fps.js"></script><script src="/js/random_post.js"></script><script type="text/javascript" src="https://cdn1.tianli0.top/npm/jquery@latest/dist/jquery.min.js"></script><script type="text/javascript" src="/js/rightmenu.js"></script><script src="/js/weather.js"></script><script src="/js/welcome.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script src="/js/share.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">   </span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://ldm0715.github.io/categories/Hexo博客/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍐 Hexo博客 (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ldm0715.github.io/categories/Halo博客/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍒 Halo博客 (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ldm0715.github.io/categories/Python实践/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍉 Python实践 (6)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ldm0715.github.io/categories/机器视觉/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍇 机器视觉 (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ldm0715.github.io/categories/杂-Mess/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍍 杂&Mess (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ldm0715.github.io/categories/音视频信号处理/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🥥 音视频信号处理 (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="https://ldm0715.github.io/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(33.333333333333336% - 5px);background: #f2f2f2;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #b30070}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>function history_calendar_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span style="font-size: large;">那年今日</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
                console.log('已挂载history_calendar')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            history_calendar_injector_config()
        } </script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="post/anaconda-de-ji-chu-shi-yong/" alt=""><img width="48" height="48" src="https://www.z4a.net/images/2024/05/06/Anaconda.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-25</span><a class="blog-slider__title" href="post/anaconda-de-ji-chu-shi-yong/" alt="">Anaconda-基础使用总结</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="post/anaconda-de-ji-chu-shi-yong/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="post/hexo-bo-ke-da-jian-li-cheng/" alt=""><img width="48" height="48" src="https://www.z4a.net/images/2024/05/06/hexoblog.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-02-21</span><a class="blog-slider__title" href="post/hexo-bo-ke-da-jian-li-cheng/" alt="">Hexo-博客搭建</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="post/hexo-bo-ke-da-jian-li-cheng/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="post/halo-bo-ke-da-jian-li-cheng/" alt=""><img width="48" height="48" src="https://www.z4a.net/images/2024/05/06/Haloblog.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-11-11</span><a class="blog-slider__title" href="post/halo-bo-ke-da-jian-li-cheng/" alt="">Halo-博客搭建</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="post/halo-bo-ke-da-jian-li-cheng/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="post/hexo-yu-halo-de-shi-yong-hou-de-gan-shou/" alt=""><img width="48" height="48" src="https://www.z4a.net/images/2024/05/06/haloorhexo.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-13</span><a class="blog-slider__title" href="post/hexo-yu-halo-de-shi-yong-hou-de-gan-shou/" alt="">Hexo vs Halo-两者使用的感受</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="post/hexo-yu-halo-de-shi-yong-hou-de-gan-shou/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="post/shi-yong-whl-wen-jian-kuai-su-an-zhuang-pytorch/" alt=""><img width="48" height="48" src="https://www.z4a.net/images/2024/05/06/PyTorch.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-11-16</span><a class="blog-slider__title" href="post/shi-yong-whl-wen-jian-kuai-su-an-zhuang-pytorch/" alt="">PyTorch-国内极速安装</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="post/shi-yong-whl-wen-jian-kuai-su-an-zhuang-pytorch/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="post/python-bian-cheng-zhong-yu-dao-de-yi-xie-wen-ti/" alt=""><img width="48" height="48" src="https://www.z4a.net/images/2024/05/06/PyCharm.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-11-19</span><a class="blog-slider__title" href="post/python-bian-cheng-zhong-yu-dao-de-yi-xie-wen-ti/" alt="">PyCharm-编程中遇到的一些问题</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="post/python-bian-cheng-zhong-yu-dao-de-yi-xie-wen-ti/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v6.2.0" title=""><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.9.0" title=""><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=brevo" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src="https://img.shields.io/badge/Powerby-Github-d021d6?style=flat&amp;logo=Github" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/lxgw/LxgwWenKai-Screen" style="margin-inline:5px" data-title="本站字体为霞鹜文楷" title=""><img src="https://img.shields.io/badge/Font-LXGW%20WenKai-pink?style=flat&amp;logo=fluentd" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '500ms');
    arr[i].setAttribute('data-wow-delay', '50ms');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --></body></html>